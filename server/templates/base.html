<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ APP_NAME }}</title>
  <style>
    :root{
      --brand:#4f46e5;      /* Indigo m·ªÅm */
      --brand-2:#06b6d4;    /* Cyan nh·∫•n */
      --bg:#f7fafc;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#64748b;
      --ok:#14b8a6;
      --warn:#f59e0b;
      --err:#ef4444;
      --ring:#e5e7eb;
    }
    *{box-sizing:border-box} html,body{margin:0;background:var(--bg);color:var(--text);font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    a{color:var(--brand);text-decoration:none}
    .layout{max-width:1180px;margin:0 auto;padding:18px}
    .topbar{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px}
    .title{font-weight:800;font-size:20px;display:flex;gap:8px;align-items:center}
    .nav{display:flex;gap:8px;flex-wrap:wrap}
    .btn{padding:8px 12px;border:1px solid var(--ring);border-radius:10px;background:#fff;cursor:pointer}
    .btn:hover{border-color:var(--brand)}
    .btn.brand{background:linear-gradient(90deg,var(--brand),var(--brand-2));color:#fff;border:none}
    .btn.small{padding:6px 10px;font-size:12px}
    .card{background:var(--card);border:1px solid var(--ring);border-radius:14px;padding:12px}
    .pill{display:inline-block;padding:6px 10px;background:#f1f5f9;border:1px solid var(--ring);border-radius:999px}
    .stats .stat{background:var(--card);border:1px solid var(--ring);border-radius:14px;padding:12px}
    .stats .num{font-weight:800;font-size:22px;margin:6px 0 8px}
    .blue{border-left:6px solid var(--brand)}
    .yellow{border-left:6px solid var(--warn)}
    table{border-collapse:collapse;width:100%}
    th,td{padding:8px;border-bottom:1px solid var(--ring);vertical-align:top}
    thead th{font-weight:700}
    .ok{background:#ecfdf5;color:#065f46;border:1px solid #a7f3d0}
    .warn{background:#fffbeb;color:#92400e;border:1px solid #fde68a}
    .err{background:#fee2e2;color:#7f1d1d;border:1px solid #fecaca}
    .ipt{padding:8px;border:1px solid var(--ring);border-radius:8px;background:#fff;width:100%}
    .list{overflow:auto;max-height:180px;border:1px solid var(--ring);border-radius:10px}
    .msg{margin:8px 0}
    .msg.ok{color:#065f46}.msg.error{color:#7f1d1d}
  </style>
</head>
<body>
  <div class="layout">
    <div class="topbar">
      <div class="title">üìÅ {{ APP_NAME }}</div>
      <div class="nav">
        {% if current_user.is_authenticated and current_user.role == 'admin' %}
          <a class="btn" href="{{ url_for('congvan_new') }}">+ Th√™m c√¥ng vƒÉn</a>
          <a class="btn" href="{{ url_for('users') }}">Ng∆∞·ªùi d√πng</a>
        {% endif %}
        {% if current_user.is_authenticated %}
          <a class="btn" href="{{ url_for('logout') }}">ƒêƒÉng xu·∫•t</a>
        {% endif %}
      </div>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for c, m in messages %}
          <div class="msg {{ c }}">{{ m }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
  </div>

  <!-- DataTables nh·∫π (tu·ª≥ ch·ªçn) cho sort/search c·ª•c b·ªô -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vanilla-datatables@latest/dist/vanilla-dataTables.min.css">
  <script src="https://cdn.jsdelivr.net/npm/vanilla-datatables@latest/dist/vanilla-dataTables.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const t = document.querySelector('#main-table');
      if (t) new DataTable(t, {searchable:true, fixedHeight:true, perPage:20});
      // hi·ªán/·∫©n m·∫≠t kh·∫©u (trang login)
      const toggle = document.querySelector('[data-toggle-pw]');
      if (toggle){
        const inp = document.querySelector('input[name="password"]');
        toggle.addEventListener('click', () => {
          inp.type = inp.type === 'password' ? 'text' : 'password';
          toggle.textContent = inp.type === 'password' ? 'üëÅ Hi·ªán' : 'üôà ·∫®n';
        });
      }
    });
  </script>
</body>
</html>
