<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{ APP_NAME }}</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
  /* ===== Pastel palette m·ªÅm nh∆∞ ·∫£nh b·∫°n g·ª≠i ===== */
  :root{
    --bg:#f7f8fc;           /* n·ªÅn chung */
    --ink:#0f172a;          /* text ch√≠nh */
    --muted:#64748b;        /* text ph·ª• */
    --card:#ffffff;         /* n·ªÅn th·∫ª */
    --card-b:#e5e7eb;       /* vi·ªÅn th·∫ª */

    /* M√†u nh·∫•n d·ªãu */
    --pri:#4f8ef7;          /* xanh d∆∞∆°ng d·ªãu */
    --pri-600:#3c7be6;
    --blue-soft:#eaf2ff;

    --teal:#37b3a6;         /* xanh ng·ªçc */
    --teal-soft:#e8faf7;

    --amber:#f3c14b;        /* v√†ng */
    --amber-soft:#fff6e6;

    --rose:#f18a8a;         /* h·ªìng/ƒë·ªè m·ªÅm */
    --rose-soft:#ffeded;
  }

  body{
    font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
    color:var(--ink); background:var(--bg);
  }

  /* Card & kh·ªëi */
  .card{background:var(--card);border:1px solid var(--card-b);border-radius:14px;
        box-shadow:0 4px 14px rgba(15,23,42,.05)}
  .th{background:#eef2f6;color:#334155}

  /* N√∫t */
  .btn{display:inline-flex;align-items:center;justify-content:center;
       padding:.58rem .9rem;border-radius:12px;font-weight:700;line-height:1}
  .btn-primary{background:var(--pri);color:#fff}
  .btn-primary:hover{background:var(--pri-600)}
  .btn-ghost{background:#eef2f6;color:#0f172a}
  .btn-ghost:hover{background:#e4e9f1}

  /* Input m·ªÅm */
  .input,.select,.textarea{
    width:100%; padding:.6rem .75rem; border:1px solid #e2e8f0; border-radius:12px; background:#fff
  }
  .input:focus,.select:focus,.textarea:focus{
    outline:none;border-color:#c7d2fe;box-shadow:0 0 0 3px rgba(79,70,229,.12)
  }

  /* Ti√™u ƒë·ªÅ & ‚Äúsection bar‚Äù nh·∫π */
  .heading{font-weight:800;letter-spacing:.2px}
  .section{
    border-radius:14px;border:1px solid var(--card-b);background:#e9f5ff;
    padding:.6rem .9rem;margin-bottom:.75rem;display:flex;align-items:center;gap:.5rem;
    font-weight:700;color:#1e293b
  }
  .section .icon{width:22px;height:22px;display:inline-grid;place-items:center;
                 border-radius:8px;background:#dbeafe;color:#1d4ed8}

  /* Chip tr·∫°ng th√°i pastel (gi·ªØ nguy√™n text/n·ªôi dung render hi·ªán c√≥) */
  .chip{display:inline-flex;align-items:center;font-weight:800;font-size:.8rem;
        padding:.25rem .6rem;border-radius:999px;border:1px solid transparent}
  .chip-blue {background:var(--blue-soft);  color:#1e40af; border-color:#bfd3ff}
  .chip-teal {background:var(--teal-soft);  color:#0f766e; border-color:#bfeee8}
  .chip-amber{background:var(--amber-soft); color:#92400e; border-color:#ffe3ad}
  .chip-rose {background:var(--rose-soft);  color:#9f1239; border-color:#ffbaba}

  /* Card th·ªëng k√™ theo m√†u (n·∫øu c√≥ d√πng) */
  .stat{border-radius:16px;padding:1rem 1.2rem;color:#0f172a}
  .stat-blue {background:var(--blue-soft);  border:1px solid #bfd3ff}
  .stat-teal {background:var(--teal-soft);  border:1px solid #bfeee8}
  .stat-amber{background:var(--amber-soft); border:1px solid #ffe3ad}
  .stat-rose {background:var(--rose-soft);  border:1px solid #ffbaba}
</style>

</head>
<body>
  <header class="bg-white border-b sticky top-0 z-30">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="{{ url_for('dashboard') }}" class="text-2xl heading flex items-center gap-2"
         style="color:var(--pri)">
        üìÅ {{ APP_NAME }}
      </a>
      {% if current_user.is_authenticated %}
      <nav class="flex items-center gap-2">
        {% if current_user.role == 'admin' %}
          <a class="btn btn-primary" href="{{ url_for('congvan_new') }}">+ Th√™m c√¥ng vƒÉn</a>
          <a class="btn btn-ghost" href="{{ url_for('users') }}">Ng∆∞·ªùi d√πng</a>
        {% endif %}
        <a class="btn btn-ghost" href="{{ url_for('logout') }}">ƒêƒÉng xu·∫•t</a>
      </nav>
      {% endif %}
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-4 py-6">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="space-y-2 mb-4">
          {% for cat,msg in messages %}
            {% if cat in ['error','warning'] %}
              <div class="px-4 py-2 rounded-xl font-semibold
                {% if cat=='error' %} bg-rose-50 text-rose-700 border border-rose-200
                {% else %} bg-amber-50 text-amber-700 border border-amber-200 {% endif %}">
                {{ msg }}
              </div>
            {% endif %}
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
  </main>

  <footer class="py-8 text-center text-xs text-gray-400">Nh·∫π nh√†ng ‚Äì r√µ r√†ng ‚Äì d·ªÖ d√πng.</footer>
</body>
</html>
