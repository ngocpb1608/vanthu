<!doctype html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Quản lý Công văn</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
      body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; }
      .card { @apply bg-white rounded-2xl shadow p-6; }
      .btn { @apply inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition; }
      .btn-primary { @apply bg-indigo-600 text-white hover:bg-indigo-700; }
      .btn-soft { @apply bg-gray-100 hover:bg-gray-200; }
      .input { @apply w-full rounded-xl border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500; }
      .select { @apply w-full rounded-xl border border-gray-300 px-3 py-2 bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500; }
      .label { @apply block text-sm font-medium text-gray-700 mb-1; }
      .table { @apply min-w-full text-sm; }
      .th { @apply text-left text-gray-500 font-semibold pb-3; }
      .td { @apply py-2 border-t; }
      .badge { @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium; }
      .badge-wait { @apply bg-yellow-100 text-yellow-800; }
      .badge-progress { @apply bg-blue-100 text-blue-800; }
      .badge-done { @apply bg-green-100 text-green-800; }
      .container-tight { @apply max-w-6xl mx-auto px-4; }
      .flash { @apply px-4 py-2 rounded-xl font-medium; }
    </style>
  </head>
  <body class="bg-gray-50">
    <header class="bg-white border-b">
      <div class="container-tight py-4 flex items-center justify-between">
        <a href="{{ url_for('dashboard') }}" class="text-xl font-bold">📨 Đơn Thư & Công Văn</a>
        {% if current_user.is_authenticated %}
        <nav class="flex items-center gap-2">
          <a class="btn btn-soft" href="{{ url_for('congvan_new') }}">+ Thêm công văn</a>
          {% if current_user.role == 'admin' %}
            <a class="btn btn-soft" href="{{ url_for('users') }}">Người dùng</a>
          {% endif %}
          <form action="{{ url_for('logout') }}" method="get">
            <button class="btn btn-primary" type="submit">Đăng xuất</button>
          </form>
        </nav>
        {% endif %}
      </div>
    </header>
    <main class="container-tight py-6">
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <div class="space-y-2 mb-4">
          {% for category, message in messages %}
            <div class="flash {% if category == 'success' %}bg-green-100 text-green-800{% elif category == 'error' %}bg-red-100 text-red-800{% else %}bg-gray-100 text-gray-800{% endif %}">
              {{ message }}
            </div>
          {% endfor %}
          </div>
        {% endif %}
      {% endwith %}
      {% block content %}{% endblock %}
    </main>
    <footer class="py-8 text-center text-xs text-gray-500">
      Làm bằng Flask + Tailwind. Triết lý: gọn, nhanh, đẹp.
    </footer>
  </body>
</html>
