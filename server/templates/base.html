<!doctype html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ APP_NAME }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
      :root{
        --card:#ffffff; --card-b:#e5e7eb; --bg:#f8fafc; --text:#0f172a;
        --muted:#64748b; --primary:#4f46e5; --primary-600:#4338ca;
      }
      body{font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:var(--text)}
      .card{background:var(--card);border:1px solid var(--card-b);border-radius:14px;box-shadow:0 1px 2px rgba(0,0,0,.03)}
      .btn{display:inline-flex;align-items:center;justify-content:center;padding:.55rem .9rem;border-radius:12px;font-weight:600;line-height:1}
      .btn-primary{background:var(--primary);color:#fff}
      .btn-primary:hover{background:var(--primary-600)}
      .btn-ghost{background:#f1f5f9;color:#0f172a}
      .btn-ghost:hover{background:#e2e8f0}
      .heading{font-weight:700;letter-spacing:.2px}
      .th{background:#f1f5f9;color:#334155}
      .chip{display:inline-flex;align-items:center;padding:.2rem .6rem;border-radius:9999px;font-weight:600;font-size:.75rem;background:#eef2ff;color:#3730a3;border:1px solid #e0e7ff}
      .input,.select,.textarea{width:100%; padding:.55rem .75rem; border:1px solid #e2e8f0; border-radius:12px; background:#fff}
      .input:focus,.select:focus,.textarea:focus{outline:none;border-color:#c7d2fe;box-shadow:0 0 0 3px rgba(79,70,229,.15)}
    </style>
  </head>
  <body class="bg-[var(--bg)]">
    <header class="bg-white border-b sticky top-0 z-30">
      <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
        <a href="{{ url_for('dashboard') }}" class="text-lg heading">üì® {{ APP_NAME }}</a>
        {% if current_user.is_authenticated %}
        <nav class="flex items-center gap-2">
          {% if current_user.role == 'admin' %}
            <a class="btn btn-primary" href="{{ url_for('congvan_new') }}">+ Th√™m c√¥ng vƒÉn</a>
            <a class="btn btn-ghost" href="{{ url_for('users') }}">Ng∆∞·ªùi d√πng</a>
          {% endif %}
          <a class="btn btn-ghost" href="{{ url_for('logout') }}">ƒêƒÉng xu·∫•t</a>
        </nav>
        {% endif %}
      </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 py-6">
      {# ch·ªâ hi·ªÉn th·ªã l·ªói/c·∫£nh b√°o, ·∫©n success ƒë·ªÉ kh√¥ng c√≥ d·∫£i xanh l√° #}
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <div class="space-y-2 mb-4">
            {% for cat,msg in messages %}
              {% if cat in ['error','warning'] %}
                <div class="px-4 py-2 rounded-xl font-medium
                    {% if cat=='error' %} bg-red-50 text-red-700 border border-red-200
                    {% else %} bg-amber-50 text-amber-700 border border-amber-200 {% endif %}">
                  {{ msg }}
                </div>
              {% endif %}
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}
      {% block content %}{% endblock %}
    </main>

    <footer class="py-8 text-center text-xs text-gray-400">Flask + Tailwind ‚Äî t·ªëi gi·∫£n, r√µ r√†ng.</footer>
  </body>
</html>
