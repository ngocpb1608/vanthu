{% extends "base.html" %}
{% block content %}
<div class="max-w-3xl mx-auto card">
  <h1 class="text-2xl font-bold mb-4">
    {% if mode == 'new' %}Thêm công văn{% else %}Sửa công văn{% endif %}
  </h1>
  <form method="post" class="grid md:grid-cols-2 gap-4">
    <div>
      <label class="label">Mã *</label>
      <input class="input" name="ma" value="{{ item.ma if item else '' }}" required />
    </div>
    <div>
      <label class="label">Loại đơn thư</label>
      <input class="input" name="loai_don_thu" value="{{ item.loai_don_thu if item else '' }}" />
    </div>
    <div>
      <label class="label">Tháng</label>
      <input class="input" type="number" min="1" max="12" name="thang" value="{{ item.thang if item and item.thang else '' }}" />
    </div>
    <div>
      <label class="label">Năm</label>
      <input class="input" type="number" name="nam" value="{{ item.nam if item and item.nam else '' }}" />
    </div>
    <div>
      <label class="label">Mã KH</label>
      <input class="input" name="ma_kh" value="{{ item.ma_kh if item else '' }}" />
    </div>
    <div>
      <label class="label">Tên *</label>
      <input class="input" name="ten" value="{{ item.ten if item else '' }}" required />
    </div>
    <div class="md:col-span-2">
      <label class="label">Địa chỉ</label>
      <input class="input" name="dia_chi" value="{{ item.dia_chi if item else '' }}" />
    </div>
    <div>
      <label class="label">Nhân viên</label>
      <input class="input" name="nhan_vien" value="{{ item.nhan_vien if item else '' }}" placeholder="Tên người phụ trách" />
    </div>
    <div>
      <label class="label">Ngày NV nhận đơn</label>
      <input class="input" type="date" name="ngay_nv_nhan" value="{{ item.ngay_nv_nhan if item and item.ngay_nv_nhan else '' }}" />
    </div>
    <div class="md:col-span-2">
      <label class="label">Nội dung đơn</label>
      <textarea class="input" name="noi_dung" rows="4">{{ item.noi_dung if item else '' }}</textarea>
    </div>
    <div>
      <label class="label">Tình trạng xử lý</label>
      <select class="select" name="tinh_trang">
        {% for st in ['NV chưa lấy đơn', 'Đang giải quyết', 'Hoàn Thành'] %}
          <option value="{{ st }}" {% if item and item.tinh_trang == st %}selected{% endif %}>{{ st }}</option>
        {% endfor %}
      </select>
    </div>
    <div>
      <label class="label">Ghi chú</label>
      <input class="input" name="ghi_chu" value="{{ item.ghi_chu if item else '' }}" />
    </div>
    <div class="md:col-span-2 flex gap-2">
      <button class="btn btn-primary" type="submit">Lưu</button>
      <a class="btn btn-soft" href="{{ url_for('dashboard') }}">Huỷ</a>
    </div>
  </form>
</div>
{% endblock %}
